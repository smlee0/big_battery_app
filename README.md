# Big Battery Widget App

> Flutter ê¸°ë°˜ìœ¼ë¡œ ì œì‘ëœ ì ‘ê·¼ì„± ì¹œí™” ë°°í„°ë¦¬ ëª¨ë‹ˆí„°ë§ ì•±ê³¼ ì•ˆë“œë¡œì´ë“œ í™ˆ ìœ„ì ¯ ìƒ˜í”Œì…ë‹ˆë‹¤. ì‹¤ì‹œê°„ ë°°í„°ë¦¬ ìŠ¤íŠ¸ë¦¼, ì €ì „ë ¥ ì•Œë¦¼, ì‚¬ìš©ì ì„¤ì • ì˜ì†í™”ë¥¼ í†µí•´ ì‹¤ì œ ë””ë°”ì´ìŠ¤ì˜ ë°°í„°ë¦¬ ìƒíƒœë¥¼ ì§ê´€ì ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ğŸ“· Capture Swipe

| ![ì•± í™ˆ â€“ ë°ì€ í…Œë§ˆ](docs/images/placeholder_app_home_1.png) | ![ì•± í™ˆ â€“ ë‹¤í¬ í…Œë§ˆ](docs/images/placeholder_app_home_2.png) |
| --- | --- |
| ![í™ˆ ìœ„ì ¯ â€“ ê¸°ë³¸](docs/images/placeholder_widget_1.png) | ![í™ˆ ìœ„ì ¯ â€“ ì¶©ì „ ì¤‘](docs/images/placeholder_widget_2.png) |

> ì´ë¯¸ì§€ëŠ” `docs/images/` í´ë”ì—ì„œ ê´€ë¦¬í•˜ë©°, ìƒˆ ìº¡ì²˜ë¥¼ ì´¬ì˜í•˜ë©´ ë™ì¼í•œ íŒŒì¼ëª…ì„ êµì²´í•˜ê±°ë‚˜ í‘œë¥¼ í™•ì¥í•˜ë©´ ë©ë‹ˆë‹¤.

---

## í”„ë¡œì íŠ¸ ì†Œê°œ

- **í° ë°°í„°ë¦¬ ì¹´ë“œ**: `BatteryWidget`ì´ í¼ì„¼íŠ¸ì™€ ì¶©ì „ ìƒíƒœë¥¼ í¬ê²Œ ë³´ì—¬ ì£¼ê³  ë‚¨ì€ ìš©ëŸ‰ êµ¬ê°„ì— ë§ì¶° ìƒ‰ì„ ë³€ê²½í•©ë‹ˆë‹¤.
- **ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¼**: `BatteryProvider`ê°€ `battery_plus` ìŠ¤íŠ¸ë¦¼ê³¼ ë„¤ì´í‹°ë¸Œ ìœ„ì ¯ ë¸Œë¡œë“œìºìŠ¤íŠ¸ë¥¼ ëª¨ë‘ êµ¬ë…í•´ ì•±/í™ˆ ìœ„ì ¯ì„ ë™ì‹œì— ê°±ì‹ í•©ë‹ˆë‹¤.
- **ì €ì „ë ¥ ì•Œë¦¼**: ì”ëŸ‰ 20% ì´í•˜ & ë¯¸ì¶©ì „ ì‹œ `flutter_local_notifications`ë¡œ ê²½ê³  ì•Œë¦¼ì„ ë°œì†¡í•˜ê³  Android 13+ ê¶Œí•œ ìš”ì²­ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
- **ê°„ê²°í•œ ì„¤ì •**: ê¸€ê¼´ í¬ê¸°, ë¼ì´íŠ¸/ë‹¤í¬ í…Œë§ˆ, ì €ì „ë ¥ ì•Œë¦¼ ì—¬ë¶€ë§Œ ë‚¨ê²¨ ì‚¬ìš©ì„±ì´ ë‹¨ìˆœí•´ì¡Œìœ¼ë©° ëª¨ë“  ê°’ì€ `shared_preferences`ì— ì €ì¥ë©ë‹ˆë‹¤.
- **ì•ˆë“œë¡œì´ë“œ í™ˆ ìœ„ì ¯**: `BatteryStatusWidget`ì´ ì¶©ì „ ì´ë²¤íŠ¸ ë¸Œë¡œë“œìºìŠ¤íŠ¸ì™€ ìœ„ì ¯ ë‚´ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ìœ¼ë¡œ ì•± ì‹¤í–‰ ì—¬ë¶€ì™€ ê´€ê³„ì—†ì´ ìƒíƒœë¥¼ ë°˜ì˜í•©ë‹ˆë‹¤.

## í˜„ì¬ ë²„ì „ í•˜ì´ë¼ì´íŠ¸

- ì•± í™ˆ ìƒì„¸ ì¹´ë“œì—ì„œ ë°°í„°ë¦¬ ìƒíƒœ/ë™ê¸°í™” ì‹œê°/í˜„ì¬ í…Œë§ˆë¥¼ í•œëˆˆì— í™•ì¸í•˜ê³ , ìœ„ì ¯ê³¼ ë™ì¼í•œ ìƒ‰ìƒ ì²´ê³„ë¥¼ ì ìš©í–ˆìŠµë‹ˆë‹¤.
- í™ˆ ìœ„ì ¯ì€ ì¢Œìƒë‹¨ ì¶©ì „ ë°°ì§€, ìš°ìƒë‹¨ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ìœ¼ë¡œ ê³ ì • ë°°ì¹˜ë˜ì–´ UXê°€ ë‹¨ìˆœí•©ë‹ˆë‹¤.
- ê³ ëŒ€ë¹„ í…Œë§ˆëŠ” ê¸°ë³¸ UI íŒ”ë ˆíŠ¸ë¡œ í†µí•©í•´ ë³„ë„ í† ê¸€ì´ í•„ìš” ì—†ìœ¼ë©°, ë¼ì´íŠ¸/ë‹¤í¬ ì „í™˜ë§Œ ìœ ì§€í•©ë‹ˆë‹¤.

## ì£¼ì˜ì‚¬í•­

1. **Flutter SDK ê²½ë¡œ**  
   - í˜„ì¬ WSLì—ì„œëŠ” `/mnt/d/.../flutter`ê°€ PATH ìƒë‹¨ì— ìˆì–´ ê¶Œí•œ ë¬¸ì œê°€ ìì£¼ ë°œìƒí•©ë‹ˆë‹¤.  
     ```bash
     export PATH="/mnt/c/smlee/02.Project/app/big_battery_widget_app/.flutter-sdk/bin:$PATH"
     hash -r
     flutter doctor -v
     ```
   - ì˜êµ¬ ì ìš©ì´ í•„ìš”í•˜ë©´ `~/.bashrc` ë˜ëŠ” Windows Terminal í”„ë¡œí•„ì— ë™ì¼í•œ PATHë¥¼ ì„¤ì •í•˜ì„¸ìš”.

2. **WSL â†” Windows ê¶Œí•œ**  
   - Windows íŒŒí‹°ì…˜(ì˜ˆ: `/mnt/d`)ì—ì„œ Flutterë¥¼ ì‹¤í–‰í•˜ë©´ `bin/cache` ê°±ì‹  ì‹œ `Permission denied`ê°€ ë°œìƒí•©ë‹ˆë‹¤. WSL ë‚´ë¶€ ê²½ë¡œë¡œ ë³µì‚¬í•˜ì—¬ ì‚¬ìš©í•˜ê±°ë‚˜ Windowsì—ì„œë§Œ Flutter ëª…ë ¹ì„ ì‹¤í–‰í•˜ì„¸ìš”.

3. **ë„¤íŠ¸ì›Œí¬ ì œí•œ**  
   - `flutter build apk --release`ê°€ `storage.googleapis.com`ì— ì ‘ê·¼í•˜ì§€ ëª»í•˜ë©´ ì—”ì§„ ì•„í‹°íŒ©íŠ¸ë¥¼ ë‚´ë ¤ë°›ì§€ ëª»í•´ ì‹¤íŒ¨í•©ë‹ˆë‹¤. ë°©í™”ë²½/í”„ë¡ì‹œë¥¼ í™•ì¸í•˜ê³  ì¬ì‹œë„í•˜ì„¸ìš”.

4. **ì•Œë¦¼ ê¶Œí•œ**  
   - Android 13 ì´ìƒì—ì„œëŠ” `POST_NOTIFICATIONS` ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤. ì•± ìµœì´ˆ ì‹¤í–‰ ì‹œ ê¶Œí•œ ì•ˆë‚´ê°€ í‘œì‹œë˜ì§€ ì•Šìœ¼ë©´ `ì„¤ì • > ì• í”Œë¦¬ì¼€ì´ì…˜ > ì•Œë¦¼`ì—ì„œ ìˆ˜ë™ìœ¼ë¡œ í—ˆìš©í•´ì•¼ ì•Œë¦¼ì´ ë™ì‘í•©ë‹ˆë‹¤.

## í´ë” êµ¬ì¡°

```text
lib/
 â”œâ”€â”€ app.dart                   # Provider + MaterialApp ë¶€íŠ¸ìŠ¤íŠ¸ë©
 â”œâ”€â”€ main.dart                  # ì„œë¹„ìŠ¤ ì´ˆê¸°í™” ì—”íŠ¸ë¦¬í¬ì¸íŠ¸
 â”œâ”€â”€ providers/battery_provider.dart
 â”œâ”€â”€ screens/
 â”‚    â”œâ”€â”€ home_screen.dart      # ë°°í„°ë¦¬ ëŒ€ì‹œë³´ë“œ
 â”‚    â””â”€â”€ settings_screen.dart  # ê¸€ê¼´/í…Œë§ˆ/ì•Œë¦¼ ì„¤ì •
 â”œâ”€â”€ services/
 â”‚    â”œâ”€â”€ battery_service.dart
 â”‚    â””â”€â”€ notification_service.dart
 â”œâ”€â”€ widgets/
 â”‚    â”œâ”€â”€ battery_display.dart
 â”‚    â””â”€â”€ battery_widget.dart
 â””â”€â”€ utils/theme.dart
test/
 â””â”€â”€ widgets/battery_display_test.dart
android/app/src/main/kotlin/com/example/big_battery_widget_app/
 â”œâ”€â”€ BatteryStatusWidget.kt         # AppWidgetProvider
 â”œâ”€â”€ BatterySnapshotProvider.kt     # ë„¤ì´í‹°ë¸Œ ë°°í„°ë¦¬ ì¸¡ì •
 â””â”€â”€ MainActivity.kt                # EventChannel + Flutter ì—”ì§„
```

## ì•ˆë“œë¡œì´ë“œ í™ˆ ìœ„ì ¯ ë©”ëª¨

- `android/app/src/main/res/xml/battery_widget_info.xml`: 2x1 ê¸°ë³¸ í¬ê¸°, ê°€ë¡œ ë¦¬ì‚¬ì´ì¦ˆ í—ˆìš©.
- `BatteryWidgetUpdater`: ë°°í„°ë¦¬ ë¸Œë¡œë“œìºìŠ¤íŠ¸ë¥¼ ë°›ì•„ ìœ„ì ¯ ì „ë©´ì„ ë‹¤ì‹œ ê·¸ë¦¬ë©° ë°°í„°ë¦¬ ì”ëŸ‰ì— ë”°ë¼ `widget_bg_high/medium/low` ë°°ê²½ì„ ì ìš©í•©ë‹ˆë‹¤.
- `BatteryStatusWidget`ì€ ì¶©ì „ ë¸Œë¡œë“œìºìŠ¤íŠ¸ë¥¼ ëŸ°íƒ€ì„ìœ¼ë¡œ ë“±ë¡í•˜ê³ , ìœ„ì ¯ ë‚´ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ì„ í†µí•´ ìˆ˜ë™ ê°±ì‹ ì„ ì§€ì›í•©ë‹ˆë‹¤.

### ì„¤ì¹˜ ë° í™•ì¸ ì ˆì°¨
1. `flutter install` ë˜ëŠ” `flutter run -d <deviceId>`ë¡œ ê¸°ê¸°ì— ì•±ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤.
2. í™ˆ í™”ë©´ì—ì„œ â€œí° ë°°í„°ë¦¬ ìœ„ì ¯â€ì„ ì¶”ê°€í•˜ê³  í•„ìš”í•˜ë©´ ê°€ë¡œ í¬ê¸°ë¥¼ í™•ì¥í•©ë‹ˆë‹¤.
3. ì¶©ì „ ì¼€ì´ë¸” ì—°ê²°/ë¶„ë¦¬ í˜¹ì€ ë°°í„°ë¦¬ ì”ëŸ‰ì„ ë³€í™”ì‹œí‚¤ë©´ ìœ„ì ¯ì´ ì¦‰ì‹œ ìƒˆ ë°ì´í„°ë¥¼ í‘œì‹œí•˜ê³  ë°°ê²½ìƒ‰ì´ êµ¬ê°„ë³„ë¡œ ë°”ë€ŒëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

## ê°œë°œ/ì‹¤í–‰ ê°€ì´ë“œ

| ì‘ì—… | ëª…ë ¹ |
| --- | --- |
| ì˜ì¡´ì„± ì„¤ì¹˜ | `flutter pub get` |
| ì •ì  ë¶„ì„ | `flutter analyze` |
| ìœ„ì ¯/ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ | `flutter test` |
| ì›¹ ì‹¤í–‰ (ì˜ˆ: Chrome) | `flutter run -d chrome` |
| ë””ë°”ì´ìŠ¤ ëª©ë¡ | `flutter devices` |
| ë¦´ë¦¬ìŠ¤ APK | `flutter build apk --release` |

í•„ìš” ì‹œ `flutter clean && flutter pub get`ìœ¼ë¡œ ìºì‹œë¥¼ ì´ˆê¸°í™”í•œ ë’¤ ë‹¤ì‹œ ì‹¤í–‰í•˜ì„¸ìš”. Web ë¹Œë“œ ë Œë”ëŸ¬ê°€ í•„ìš”í•˜ë©´ `--web-renderer html` ë˜ëŠ” `--web-renderer canvaskit`ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ì²´í¬ë¦¬ìŠ¤íŠ¸

- Flutter ëª…ë ¹ì´ D: ë“œë¼ì´ë¸Œ SDKë¥¼ ê°€ë¦¬í‚¨ë‹¤ë©´ PATHë¥¼ ìˆ˜ì •í•˜ê±°ë‚˜ `.flutter-sdk/bin`ì„ ë§¨ ì•ì— ë‘¡ë‹ˆë‹¤.
- `flutter doctor -v`ì—ì„œ Android SDKê°€ ê°ì§€ë˜ì§€ ì•Šìœ¼ë©´ `flutter config --android-sdk <path>` ë˜ëŠ” Android Studio ì„¤ì¹˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.
- ë„¤íŠ¸ì›Œí¬ ì°¨ë‹¨ í™˜ê²½ì—ì„œëŠ” í•„ìš”í•œ ZIPì„ ë¯¸ë¦¬ ë‹¤ìš´ë¡œë“œ í›„ `.flutter-sdk/bin/cache`ì— ìˆ˜ë™ ë°°ì¹˜í•´ ì‘ì—…ì„ ê³„ì†í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

ë¬¸ì˜ë‚˜ ê°œì„  ì œì•ˆì€ ì´ ë ˆí¬ì§€í† ë¦¬ì˜ ì´ìŠˆ íŠ¸ë˜ì»¤ì— ë“±ë¡í•´ ì£¼ì„¸ìš”. PR ì‹œ `flutter analyze`, `flutter test` ê²°ê³¼ë¥¼ í•¨ê»˜ ê³µìœ í•˜ë©´ ë¦¬ë·° ì†ë„ê°€ ë¹¨ë¼ì§‘ë‹ˆë‹¤.
